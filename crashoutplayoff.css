/* ========== PALETTE & RESET ========== */
:root{
  --bg:#f4f4f4; --text:#222;
  --nav:#001f3f; --nav-hover:#0074D9; --subnav:#003366; --accent:#ffcc00;
  --card:#fff; --muted:#6b7280; --line:#e5e7eb;
  --seed-red:#d61f2a; --score-red:#c5161f;
  
   --slot:150px;
  /* LARGHEZZA della colonna centrale (aumenta qui per più spazio) */
  --finals-col: 440px;     /* prova 440–520px */
  --grid-gap: 16px;
}

html,body{ height:100%; }

body{
  margin:0;
  font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color:var(--text);

  /* Fallback */
  background-color: var(--bg);

*{ box-sizing:border-box; } html,body{ height:100%; } body{ margin:0; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:var(--bg); color:var(--text); }


/* ========== NAVBAR / HEADER (come index) ========== */
nav{ background:var(--nav); color:#fff; display:flex; align-items:center; padding:10px 20px; flex-wrap:wrap; }
.home-icon{ font-size:1.4rem; margin-right:20px; text-decoration:none; color:#fff; }
.hamburger{ font-size:1.5rem; cursor:pointer; margin-right:20px; display:none; }
.navbar{ list-style:none; padding:0; margin:0; display:flex; gap:15px; align-items:center; flex-wrap:wrap; }
.navbar li{ position:relative; }
.navbar a{ color:#fff; text-decoration:none; padding:8px 12px; display:block; }
.navbar a:hover{ background:var(--nav-hover); border-radius:6px; }
.submenu{ display:none; position:absolute; top:100%; left:0; background:var(--subnav); border-radius:4px; z-index:10; min-width:180px; flex-direction:column; }
.submenu a{ font-size:.95rem; }
.dropdown.show .submenu{ display:flex; }

.page-header,.cup-toolbar{ max-width:1200px; margin:28px auto 8px; padding:0 16px; }
.page-header h1{ color:var(--nav); margin:0 0 6px; font-size:2.1rem; text-shadow:2px 2px 8px var(--accent); }
.page-header p{ margin:0; color:var(--muted); font-size:1.02rem; }
.cup-toolbar{ margin:12px auto 10px; display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.cup-toolbar .btn{ background:var(--nav); color:#fff; border:0; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600; box-shadow:0 2px 6px rgba(0,0,0,.06); }
.cup-toolbar .btn:hover{ filter:brightness(1.08); }

/* ========== BRACKET (desktop) ========== */
.cup-container{ max-width:none; margin:10px 16px 48px; padding-right:16px; overflow-x:auto; }

.bracket{
  display: grid;
  grid-template-columns:
    minmax(360px, max-content)
    var(--finals-col)
    minmax(360px, max-content);
  gap: var(--grid-gap);
}

.finals-split{
  display:grid;
  grid-template-rows: 1fr auto 1fr;
  align-items:center;
  justify-items:center;
  min-height: calc(var(--slot) * 8); /* stessa altezza delle altre colonne */
  position: relative;
}

.finals-split{ min-width: var(--finals-col); }

.finals .round::before{ content:none; }

/* la coppa al centro */
.trophy{
  /* se vuoi fisso: width: 280px; height: 280px; */
  width: clamp(220px, calc(var(--finals-col) - 160px), 360px);
  height: clamp(220px, calc(var(--finals-col) - 160px), 360px);
  background: url("img/cup.png") center/contain no-repeat;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,.25));
}

.trophy{ pointer-events:none; }


/* card “una sola squadra” per le finals */
.match.one-team{
  padding: 8px 12px;
}
.match.one-team .team{
  grid-template-columns: 92px auto; /* solo logo + score */
}
.match.one-team .seed{ display:none; }

/* colonne conference affiancate; destra invertita (semi vicino alle Finals) */
.conference{ display:flex; gap:24px; align-items:flex-start; }
.conference.right{ flex-direction:row-reverse; }

/* titoli macro non servono */
.conf-title{ display:none !important; }

/* round “standard” (poi la conference li sovrascrive a griglia) */
.round{ position:relative; display:flex; flex-direction:column; gap:14px; align-items:flex-start; }
.round::before{
  display:block; margin:0 0 8px; font-weight:700; color:var(--nav);
  border-left:4px solid var(--accent); padding-left:10px;
}
#left-round-1::before,  #right-round-1::before  { content:"1° turno"; }
#left-round-2::before,  #right-round-2::before  { content:"2° turno"; }
#left-round-3::before,  #right-round-3::before  { content:"Semifinali"; }

/* === Match card === */
.match{
  background:var(--card); border:1px solid var(--line); border-radius:14px;
  box-shadow:0 2px 6px rgba(0,0,0,.06);
  width:max-content; padding:10px 12px;
  display:flex; flex-direction:column; gap:20px; /* spazio tra i 2 team */
}

/* Riga squadra (Round 1: seed | logo | score) */
.team{ display:grid; grid-template-columns:36px 92px auto; gap:12px; align-items:center; }

/* Seed (solo Round 1) */
.seed{
  width:28px; height:28px; background:var(--seed-red); color:#fff;
  display:grid; place-items:center; border-radius:8px; font-weight:800; font-size:.85rem;
}

/* Logo */
.logo-wrap{ width:92px; height:92px; display:grid; place-items:center; background:transparent; border:0; border-radius:0; overflow:visible; }
.logo-wrap .logo{ width:100%; height:100%; object-fit:contain; display:block; max-width:98%; max-height:98%; }
.logo-wrap.no-logo{ background:repeating-linear-gradient(45deg,#f1f5f9,#f1f5f9 10px,#e2e8f0 10px,#e2e8f0 20px); }

/* Nasconde l'icona/alt delle immagini segnaposto */
.logo[alt="TBD"]{ display:none !important; }


/* Punteggio */
/* Centro perfetto del numero nella box punteggio */
.score-box{
  width:42px; min-height:40px; padding:4px 8px; justify-self:start;
  background:var(--score-red); color:#fff; border:2px solid #8b0f15;
  border-radius:8px; font-weight:800; font-size:1.15rem; letter-spacing:0;
  display:grid; align-items:center; text-align:center; outline:none; user-select:text;
}

.score-box:empty:before{ content:attr(data-placeholder); opacity:.8; }
.score-box:focus{ box-shadow:0 0 0 3px rgba(197,22,31,.25); }
.score-box[contenteditable="false"]{ cursor:default; caret-color:transparent; user-select:none; }

/* Round 2+ : niente seed; layout logo|score più stretto */
#left-round-2 .seed, #left-round-3 .seed,
#right-round-2 .seed, #right-round-3 .seed,
.finals-split .seed{ display:none; }

#left-round-2 .team, #left-round-3 .team,
#right-round-2 .team, #right-round-3 .team,
.finals-split .team{ grid-template-columns:92px auto; gap:12px; }


/* ===== Layout “ad albero” per le conference ===== */
.conference .round{
  position:relative;
  display:grid !important;
  grid-template-rows:repeat(8, var(--slot));
  row-gap:0;
  min-height:calc(8 * var(--slot));
}

/* label dei round sopra e fuori flusso */
.conference .round::before{
  position:absolute; top:-26px; left:0;
  padding-left:10px; border-left:4px solid var(--accent);
  font-weight:700; color:var(--nav);
}

/* Posizionamento ad albero — LEFT */
#left-round-1 .match:nth-of-type(1){ grid-row:1 / span 2; }
#left-round-1 .match:nth-of-type(2){ grid-row:3 / span 2; }
#left-round-1 .match:nth-of-type(3){ grid-row:5 / span 2; }
#left-round-1 .match:nth-of-type(4){ grid-row:7 / span 2; }
#left-round-2 .match:nth-of-type(1){ grid-row:2 / span 4; }
#left-round-2 .match:nth-of-type(2){ grid-row:6 / span 4; }
#left-round-3 .match:nth-of-type(1){ grid-row:4 / span 8; }

/* Posizionamento ad albero — RIGHT */
#right-round-1 .match:nth-of-type(1){ grid-row:1 / span 2; }
#right-round-1 .match:nth-of-type(2){ grid-row:3 / span 2; }
#right-round-1 .match:nth-of-type(3){ grid-row:5 / span 2; }
#right-round-1 .match:nth-of-type(4){ grid-row:7 / span 2; }
#right-round-2 .match:nth-of-type(1){ grid-row:2 / span 4; }
#right-round-2 .match:nth-of-type(2){ grid-row:6 / span 4; }
#right-round-3 .match:nth-of-type(1){ grid-row:4 / span 8; }

/* Finals: mostra solo il titolo centrale delle Finals */
.conference > .conf-title{ display:none; }
.finals     > .conf-title{ display:block; }

/* ===== CONNETTORI (layer disegnato dal JS) ===== */
:root {
  --wire-color: #ff1a1a; /* rosso acceso */
}

.wire-layer{
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;              /* sotto le card */
}
.wire-layer .wire{
  background: var(--wire-color) !important;  /* colore linea */
  border-radius: 3px;
}

/* (legacy SVG, se presente) */
#bracket-wires polyline{
  stroke: var(--wire-color);
}

/* le card stanno sopra ai fili */
.conference .match,
.finals-split .match{
  position: relative;
  z-index: 1;
}

/* --- RESET: annulla l'inversione sbagliata delle card a destra --- */
.conference.right .match { flex-direction: column; }  /* come a sinistra */
.right .match { flex-direction: column; }             /* nel dubbio */

/* ============== DESTRA – ROUND 1 ============== */
/* Ordine voluto: [score] [logo] [seed] */
#right-round-1 .team{
  display:flex;                 /* override del grid */
  align-items:center;
  gap:12px;
}
#right-round-1 .score-box{ order:1; width:42px; min-width:42px; }
#right-round-1 .logo-wrap{ order:2; width:92px; min-width:92px; height:92px; }
#right-round-1 .seed     { order:3; width:28px; min-width:28px; }

/* ============== DESTRA – ROUND 2 e 3 ============== */
/* Niente seed, risultato a sinistra e logo a destra */
#right-round-2 .team,
#right-round-3 .team{
  display:flex;                 /* override del grid */
  flex-direction: row-reverse;  /* diventa: [score] [logo] */
  align-items:center;
  gap:12px;
}
#right-round-2 .logo-wrap,
#right-round-3 .logo-wrap{ width:92px; min-width:92px; height:92px; }
#right-round-2 .score-box,
#right-round-3 .score-box{ width:42px; min-width:42px; }

/* Titolo centrato e full-width */
.page-header{
  max-width:100% !important;
  width:100%;
  margin:28px 0 8px;      /* niente padding laterale */
  display:grid;
  place-items:center;     /* centra orizzontale/verticale */
  text-align:center;
}
.page-header h1{ margin:0; }

/* Nascondi la riga descrittiva sotto al titolo */
.page-header p{ display:none !important; }

/* Nascondi il bottone “Aggiorna da Classifica” (tutta la toolbar) */
.cup-toolbar{ display:none !important; }

.bracket-mobile { display: none !important; }

/* ========== MOBILE ========== */
/* ========== MOBILE ========== */
@media (max-width: 768px){

  /* --- dimensioni più compatte ma stessa struttura --- */
  :root{
    --slot: 128px;           /* gradino verticale */
    --finals-col: 380px;     /* colonna Finals più ampia */
    --grid-gap: 12px;
  }

  /* Navbar hamburger (come prima) */
  .hamburger{ display:block; }
  .navbar{ display:none; flex-direction:column; width:100%; background:var(--nav); margin-top:10px; }
  .navbar.show{ display:flex; }
  .submenu{ position:relative; background:var(--subnav); margin-left:10px; }
  .dropdown .submenu a{ padding-left:20px; }

  /* NIENTE versione alternativa: nascondi eventuale mobile-list */
  .bracket-mobile{ display:none !important; }

  /* Stesso bracket del desktop + scroll orizzontale */
  .cup-container{
    margin:8px 0 28px;
    padding:0 8px;
    overflow-x:auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Mantieni la griglia a 3 colonne, ma con una larghezza minima così scorre */
  .bracket{
    display:grid !important;
    grid-template-columns:
      minmax(320px, max-content)
      var(--finals-col)
      minmax(320px, max-content);
    gap: var(--grid-gap);
    min-width: 1240px; /* forza lo scroll se lo schermo è stretto */
    position: relative; /* per i connettori */
  }

  /* Finals “split” dimensionate sul mobile */

  .finals-split{
    grid-template-rows: minmax(160px,1fr) auto minmax(160px,1fr);
    row-gap: 16px;
    padding-block: 8px;
  }

    .finals-split .match{
    position: relative;
    z-index: 1;              /* card sopra al trofeo */
    margin-inline: auto;     /* centrata nella colonna */
  }
    .trophy{
    width: clamp(200px, calc(var(--finals-col) - 120px), 300px);
    height: clamp(200px, calc(var(--finals-col) - 120px), 300px);
    z-index: 0;              /* sta dietro alle card */
  }

  /* Card e righe squadra più compatte */
  .match{
    padding:8px 10px;
    gap:12px;
  }
  .team{
    grid-template-columns: 28px 72px auto; /* seed | logo | score (round 1) */
    gap:8px;
  }
  .seed{
    width:24px; height:24px; font-size:.75rem; border-radius:6px;
  }
  .logo-wrap{ width:72px; height:72px; }
  .logo-wrap .logo{ max-width:98%; max-height:98%; }
  .score-box{
    width:36px; min-height:34px; padding:4px 6px;
    font-size:1rem; border-radius:7px;
  }

  /* Round 2+ (niente seed) layout logo | score più stretto */
  #left-round-2 .team, #left-round-3 .team,
  #right-round-2 .team, #right-round-3 .team,
  .finals-split .team{
    grid-template-columns: 72px auto;
    gap:8px;
  }

  /* Mantieni l’ordine voluto a DESTRA anche in mobile */
  #right-round-1 .team{
    display:flex; align-items:center; gap:8px;
  }
  #right-round-1 .score-box{ order:1; width:36px; min-width:36px; }
  #right-round-1 .logo-wrap{ order:2; width:72px; min-width:72px; height:72px; }
  #right-round-1 .seed     { order:3; width:24px; min-width:24px; }

  #right-round-2 .team,
  #right-round-3 .team{
    display:flex; flex-direction:row-reverse; align-items:center; gap:8px;
  }
  #right-round-2 .logo-wrap,
  #right-round-3 .logo-wrap{ width:72px; min-width:72px; height:72px; }
  #right-round-2 .score-box,
  #right-round-3 .score-box{ width:36px; min-width:36px; }

  /* Label dei round un filo più piccole e ravvicinate */
  .conference .round::before{
    top:-22px;
    font-size:.95rem;
    border-left-width:3px;
    padding-left:8px;
  }

  /* Connettori: restano attivi (il layer usa position:relative su .bracket) */
  .wire-layer .wire{ height:3px; }
}
